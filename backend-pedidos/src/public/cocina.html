<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Panel de Cocina</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
        background-color: #f4f6f9;
      }
      h1 {
        color: #2c3e50;
        margin-bottom: 10px;
      }
      #estado {
        font-weight: bold;
        margin-bottom: 20px;
      }
      #estado.conectado {
        color: green;
      }
      #estado.desconectado {
        color: red;
      }
      #pedidos {
        max-height: 80vh;
        overflow-y: auto;
      }
      .pedido {
        border: 1px solid #ccc;
        padding: 12px;
        margin-bottom: 12px;
        border-radius: 8px;
        background-color: #fff;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        opacity: 0;
        transform: translateY(20px);
        animation: fadeIn 0.4s forwards;
      }
      .mesa {
        font-weight: bold;
        color: #e67e22;
        margin-bottom: 5px;
      }
      ul {
        margin: 5px 0 0 20px;
        padding: 0;
      }
      @keyframes fadeIn {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>
  <body>
    <h1>ðŸ“¦ Panel de Cocina - Pedidos Pagados</h1>
    <div id="estado" class="desconectado">ðŸ”´ Desconectado de Socket.IO</div>
    <div id="pedidos"></div>

    <script>
      (async function () {
        const backendURL = "http://localhost:4000";
        const restaurantId = "1";

        const r = await fetch("/api/auth/generar-token-servicio", {
          credentials: "include",
        });
        const { token } = await r.json();
        const socket = io(backendURL, {
          query: { restaurantId },
          auth: { token },
        });
      })();
    </script>
  </body>
</html>
